export class FormInput extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"});const e=this.getTemplate();this.innerHTML="",this.shadowRoot.appendChild(e.content.cloneNode(!0)),this.shadowRoot.updateInput=e=>{let t;if("textarea"===this.getAttribute("type"))t=this.shadowRoot.querySelector("textarea"),t&&(t.value=e);else t=this.shadowRoot.querySelector("input"),t&&(t.value=e)}}getTemplate(){const e=document.createElement("template"),t=this.getInput(),r=this.closest("[data-style_path]");r&&r.getAttribute("data-style_path");return e.innerHTML=`\n        <style>p{font-size:1rem}p input,p textarea{background-color:#efeff0;border:solid 1px #d5d5d7;width:calc(100% - 1.9rem);font-family:inherit;margin-block:0.5em;border-radius:4px;font-size:inherit;display:block;padding:0.8em}p input:focus,p textarea:focus{outline:solid 1px var(--accent_button, #fd3599);border-color:var(--accent_button, #fd3599)}p textarea{min-height:100px;max-height:300px;resize:vertical}p .helper{margin-block:5px 0;display:block;opacity:0.6}p .toggle{margin-block:0.5em;border-radius:4px;position:relative;font-size:0.9rem;overflow:hidden;cursor:pointer;display:block;height:34px;width:105px}p .toggle input{opacity:0;height:0;width:0}p .toggle input:checked+.slider:before{transform:translate(calc(100% + 44px), -50%);background-color:var(--accent_button_color, white)}p .toggle input:checked+.slider:after{color:var(--accent_button_color, white);content:"Enabled";right:auto;left:10px}p .toggle input:checked+.slider{background-color:var(--accent_button, #fd3599)}p .toggle .slider{background-color:var(--input_background, #efeff0);transition:background ease 200ms;position:absolute;bottom:0;right:0;left:0;top:0}p .toggle .slider::before{transition-property:transform, border-radius;transition-timing-function:ease;transition-duration:200ms;background-color:var(--body_color, #333);transform:translateY(-50%);border-radius:4px;position:absolute;opacity:0.9;height:22px;content:"";width:22px;left:8px;top:50%}p .toggle .slider::after{transform:translateY(-50%);color:var(--body_color, #333);position:absolute;content:"Disabled";right:10px;top:50%}p.invalid{color:var(--input_error, #fd3599)}p.invalid input,p.invalid textarea{background-color:var(--input_error_background, #fff5fa);border-color:var(--input_error, #fd3599)}p.invalid input:focus,p.invalid textarea:focus{outline:solid 1px var(--input_error, #fd3599);border-color:var(--input_error, #fd3599)}p.invalid .helper{opacity:1}\n</style>\n        ${t}`,e}getInput(){const e=this.gerDefaults();switch(e.type){case"toggle":return`\n            <p>\n                <label for="${e.name}">${e.title}:</label>\n                <small class="helper">${e.helper_text}</small>\n                <label class="toggle">\n                    <input\n                        type="checkbox"\n                        `+(e.checked?'checked="checked"':"")+`\n                        name="${e.name}"\n                        value="${e.value}"\n                        aria-label="${e.title}"\n                    >\n                    <span class="slider"></span>\n                </label>\n            </p>`;case"hidden":return`\n            <input\n                type="hidden"\n                name="${e.name}"\n                value="${e.value}"\n            >`;case"textarea":return`\n            <p>\n                <label for="${e.name}">${e.title}:</label>\n                <small class="helper">${e.helper_text}</small>\n                <textarea\n                    type="${e.type}"\n                    name="${e.name}"\n                    id="${e.name}"\n                    `+(e.required?'required="required" ':"")+"\n                    "+(e.disabled?"disabled ":"")+`\n                    placeholder="${e.placeholder}"\n                    aria-label="${e.title}"\n                    rows="${e.rows}"\n                >${e.value}</textarea>\n            </p>`;default:return`\n            <p>\n                <label for="${e.name}">${e.title}:</label>\n                <small class="helper">${e.helper_text}</small>\n                <input\n                    type="${e.type}"\n                    name="${e.name}"\n                    id="${e.name}"\n                    value="${e.value}"\n                    `+(e.required?'required="required" ':"")+"\n                    "+(e.disabled?"disabled":"")+`\n                    placeholder="${e.placeholder}"\n                    aria-label="${e.title}"\n                >\n            </p>`}return""}gerDefaults(){return{type:this.getAttribute("type")||"text",title:this.getAttribute("title")||"",name:this.getAttribute("name")||"",required:this.getAttribute("required")||!1,disabled:this.getAttribute("disabled")||!1,value:this.getAttribute("value")||"",placeholder:this.getAttribute("placeholder")||"",checked:this.getAttribute("checked")||!1,helper_text:this.textContent||"",rows:this.getAttribute("rows")||5}}}window.customElements.define("form-input",FormInput);
